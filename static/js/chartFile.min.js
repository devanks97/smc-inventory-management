function rainbow(e,t){var a,n,r,l=t/e,m=~~(6*l),s=6*l-m,o=1-s;switch(m%6){case 0:a=1,n=s,r=0;break;case 1:a=o,n=1,r=0;break;case 2:a=0,n=1,r=s;break;case 3:a=0,n=o,r=1;break;case 4:a=s,n=0,r=1;break;case 5:a=1,n=0,r=o}return"rgba("+parseInt(("00"+(~~(255*a)).toString(16)).slice(-2),16)+","+parseInt(("00"+(~~(255*n)).toString(16)).slice(-2),16)+","+parseInt(("00"+(~~(255*r)).toString(16)).slice(-2),16)+",0.6)"}function renderCanvas(){var e,t;document.getElementById("activateChart").style.display="none",tbodyTaggedElements=document.getElementsByTagName("tbody")[0],trTaggedElements=tbodyTaggedElements.children,length=trTaggedElements.length;var a={},n=[],r=document.getElementById("dropdownUL_device");try{var l=r.getElementsByTagName("a"),m=r.getElementsByClassName("selected")[0].children[0].innerText;if("All"==m)for(e=1;e<l.length;e++)n.push(l[e].innerText);else n.push(m)}catch(e){alert("Not enough Devices to build graph. Please add 1 or more Devices to DeviceList"),location.reload()}var s=[],o=document.getElementById("dropdownUL_department"),i=o.getElementsByTagName("a"),d=o.getElementsByClassName("selected")[0].children[0].innerText;if("All"==d)for(e=1;e<i.length;e++)s.push(i[e].innerText);else s.push(d);for(t=0;t<s.length;t++)for(temp_department=s[t],a[temp_department]={},e=0;e<n.length;e++)tempDevice=n[e],a[temp_department][tempDevice]=0;for(e=0;e<length;e++)tempRow=trTaggedElements[e],tempDepartment=tempRow.children[0].getElementsByTagName("a")[0].innerHTML,tempDevice=tempRow.children[1].getElementsByTagName("a")[0].innerHTML,tempTotal=tempRow.children[2].innerText,a[tempDepartment][tempDevice]=Number(tempTotal);var c={};for(var p in n)tempDevice=n[p],c[tempDevice]=[];c.Departments=[];for(var g in a){for(var p in n)tempDevice=n[p],c[tempDevice].push(a[g][tempDevice]);c.Departments.push(g)}var y=document.getElementById("summaryBarChart");y.style.display="block",document.getElementById("closeChart").style.display="block";var h=y.getContext("2d"),v=new Chart(h,{type:"bar",data:{labels:c.Departments},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),u=0;for(var p in n)tempDevice=n[p],v.data.datasets.push({label:tempDevice,data:c[tempDevice],backgroundColor:rainbow(10,u)}),u++;v.update()}function hideCanvas(){document.getElementById("summaryBarChart").style.display="none",document.getElementById("closeChart").style.display="none",document.getElementById("activateChart").style.display="block"}