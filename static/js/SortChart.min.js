function rainbow(a,d){var e,k,l,m=d/a,o=~~(6*m),p=6*m-o,s=1-p;switch(o%6){case 0:e=1,k=p,l=0;break;case 1:e=s,k=1,l=0;break;case 2:e=0,k=1,l=p;break;case 3:e=0,k=s,l=1;break;case 4:e=p,k=0,l=1;break;case 5:e=1,k=0,l=s;}var t="rgba("+parseInt(("00"+(~~(255*e)).toString(16)).slice(-2),16)+","+parseInt(("00"+(~~(255*k)).toString(16)).slice(-2),16)+","+parseInt(("00"+(~~(255*l)).toString(16)).slice(-2),16)+",0.6)";return t}function renderCanvas(){document.getElementById("activateChart").style.display="none",tbodyTaggedElements=document.getElementsByTagName("tbody")[0],trTaggedElements=tbodyTaggedElements.children,length=trTaggedElements.length;var a,d,e={},k=[],l=document.getElementById("dropdownUL_device");try{var m=l.getElementsByTagName("a"),o=l.getElementsByClassName("selected")[0].children[0].innerText;if("All"==o)for(a=1;a<m.length;a++)k.push(m[a].innerText);else k.push(o)}catch(E){alert("Not enough Devices to build graph. Please add 1 or more Devices to DeviceList"),location.reload()}var p=[],s=document.getElementById("dropdownUL_department"),t=s.getElementsByTagName("a"),u=s.getElementsByClassName("selected")[0].children[0].innerText;if("All"==u)for(a=1;a<t.length;a++)p.push(t[a].innerText);else p.push(u);for(d=0;d<p.length;d++)for(temp_department=p[d],e[temp_department]={},a=0;a<k.length;a++)tempDevice=k[a],e[temp_department][tempDevice]=0;for(a=0;a<length;a++)tempRow=trTaggedElements[a],tempDepartment=tempRow.children[0].getElementsByTagName("a")[0].innerHTML,tempDevice=tempRow.children[1].getElementsByTagName("a")[0].innerHTML,tempTotal=tempRow.children[2].innerText,e[tempDepartment][tempDevice]=+tempTotal;var v={};for(var w in k)tempDevice=k[w],v[tempDevice]=[];for(var z in v.Departments=[],e){for(var w in k)tempDevice=k[w],v[tempDevice].push(e[z][tempDevice]);v.Departments.push(z)}var A=document.getElementById("summaryBarChart");A.style.display="block",document.getElementById("closeChart").style.display="block";var B=A.getContext("2d"),C=new Chart(B,{type:"bar",data:{labels:v.Departments},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),D=0;for(var w in k)tempDevice=k[w],C.data.datasets.push({label:tempDevice,data:v[tempDevice],backgroundColor:rainbow(10,D)}),D++;C.update()}function hideCanvas(){var a=document.getElementById("summaryBarChart");a.style.display="none",document.getElementById("closeChart").style.display="none",document.getElementById("activateChart").style.display="block"}function sortTable(a){var d,e,k,l,m,o,p;if(d=document.getElementById("graphResultsTable"),k=!0,e=d.getElementsByTagName("TR"),e[0].children[a].classList.contains("ascending"))p="desc",e[0].children[a].classList.toggle("ascending"),e[0].children[a].children[0].children[1].classList.toggle("ascending"),e[0].children[a].classList.toggle("descending"),e[0].children[a].children[0].children[1].classList.toggle("descending");else if(e[0].children[a].classList.contains("descending"))p="asc",e[0].children[a].classList.toggle("ascending"),e[0].children[a].children[0].children[1].classList.toggle("ascending"),e[0].children[a].classList.toggle("descending"),e[0].children[a].children[0].children[1].classList.toggle("descending");else{if(p="asc",sortedElements=document.getElementsByClassName("sorted"),0!=sortedElements.length)for(l=0;l<sortedElements.length;l++)sortedElements[l].classList.remove("sorted"),sortedElements[l].classList.remove("ascending"),sortedElements[l].classList.remove("descending");e[0].children[a].classList.toggle("ascending"),e[0].children[a].children[0].children[1].classList.toggle("ascending"),e[0].children[a].classList.toggle("sorted")}for(;k;)for(k=!1,l=1;l<e.length-1;l++)if(2!=a){if(m=e[l].getElementsByTagName("TD")[a].childNodes[1].innerHTML,o=e[l+1].getElementsByTagName("TD")[a].childNodes[1].innerHTML,"asc"==p){if(m.toLowerCase()>o.toLowerCase()){e[l].parentNode.insertBefore(e[l+1],e[l]),k=!0;break}}else if("desc"==p&&m.toLowerCase()<o.toLowerCase()){e[l].parentNode.insertBefore(e[l+1],e[l]),k=!0;break}}else if(m=+e[l].getElementsByTagName("TD")[a].innerHTML,o=+e[l+1].getElementsByTagName("TD")[a].innerHTML,"asc"==p){if(m>o){e[l].parentNode.insertBefore(e[l+1],e[l]),k=!0;break}}else if("desc"==p&&m<o){e[l].parentNode.insertBefore(e[l+1],e[l]),k=!0;break}}